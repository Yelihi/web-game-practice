<html>

<head>
    <meta charset="UTF-8" />
    <title>구구단</title>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!--<script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>-->
    <!--<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>-->
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">
        'use strict';

        // 함수 컴퍼넌트에도 state 와 ref 기능을 넣어준것이 hooks 다.
        const GuGudan = () => {
            const [first, setFirst] = React.useState(Math.ceil(Math.random() * 9)); // 컴퍼넌트 안에 있어야 한다.
            const [second, setSecond] = React.useState(Math.ceil(Math.random() * 9));
            const [value, setValue] = React.useState('');
            const [result, setResult] = React.useState('');
            const inputRef = React.useRef(null); // 얘로 돔에 접근

            const onChangeInput = (e) => {
                setValue(e.target.value);
            };

            const onSubmitForm = (e) => {
                e.preventDefault();
                if(parseInt(value) === first * second){ // 다만 밑에 각각으로 랜더링이 이루어지는게 아니라 비동기로서 한번에 일어난다. 
                    setResult(`정답! 답은 ${prevState.value}`);
                    setFirst(Math.ceil(Math.random() * 9));
                    setSecond(Math.ceil(Math.random() * 9));
                    setValue('');
                    inputRef.current.focus(); // 요기에다가 밑에 dom에 접근했던거에서 실제 주고싶은 효과를 추가해주면 된다.
                } else {
                    setResult('땡');
                    setValue('');
                    inputRef.current.focus(); // 형식은 이렇게 
                };
            };


            // 렌더링을 할 때 클래스와 달리 전체가 다 실행되서, 메서드도 어쩔수 없이 다시 실행된다. 
            // 여기서 html 생성 시 class, for 사용이 안되니 밑에껄로 대체하자
            return (
                <React.Fragment>
                    <div>{first} 곱하기 {second}는?</div>
                    <form onSubmit = {onSubmitForm}>
                        <input ref={inputRef} onChange={onChangeInput} value={value} />
                        <button>입력</button>
                    </form>
                    <div id="result" className htmlFor>{result}</div> 
                </React.Fragment>
            ) 
        }




    </script>
    <script type="text/babel">
        ReactDOM.render(<GuGudan />, document.querySelector('#root')); // 우리가 만든 컴포넌트를 root 안에 넣어라 (17버전)
  //ReactDOM.createRoot(document.querySelector('#root')).render(<LikeButton />); // 18버전 React code
    </script>
</body>

</html>